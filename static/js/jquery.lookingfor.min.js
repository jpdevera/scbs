!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){"use strict";function e(i,n){if(t.extend(this,{_input:null,_items:null,_container:t(i),items:"li",value:"",cache:[],queryCharLimit:1,queryTimer:null,queryDelay:100,highlight:!1,highlightClass:"lfitem_match",highlightColor:"#ffde00",hiddenListClass:"lflist_hidden",hiddenItemAttr:"data-lfhidden",hiddenCount:0,searchAttr:"text",onFound:null},n||{}),this._items=t(this.items,i),this._input=t(this.input),this._items.length){this._input.length&&this._input.on("keyup change",this._debounce(function(e){e.stopImmediatePropagation();var i=(this._input.val()||"").toLowerCase();i=t.trim(i),i!==this.value&&(this.value=i,i.length>=this.queryCharLimit?this.query():this.showAll())},this.queryDelay,this));var h=this;return this.addStyles(),this.indexing(),{re_init:function(){var t=new e(i,n);return t},destroy:function(){h._items=null,h._container=t(i),h.items="li",h.value="",h.cache=[],h.queryCharLimit=1,h.queryTimer=null,h.queryDelay=100,h.highlight=!1,h.highlightClass="lfitem_match",h.highlightColor="#ffde00",h.hiddenListClass="lflist_hidden",h.hiddenItemAttr="data-lfhidden",h.hiddenCount=0,h.onFound=null},addToCacheVal:function(e){var i="",n=e.attr("data-unique-search")?e.attr("data-unique-search"):e.attr("id");e.find("input:visible,select,textarea").each(function(){i+=t(this).is("textarea")||t(this).is("select")?""==t(this).text()?t(this).val():t(this).text().replace(/[\s]/g," ")+"\n":t(this).val()+"\n"}),h.cache.push({node:e[0],html:e[0].innerHTML,text:(i||"").toLowerCase(),hidden:!1,id:n})},removeCacheVal:function(t){var e=t.attr("data-unique-search")?t.attr("data-unique-search"):t.attr("id");for(var i in h.cache)h.cache[i].id==e&&h.cache.splice(i,1)}}}}t.fn.lookingfor=function(i){return this.each(function(){var n=new e(this,i);return t.extend(this,n)})},e.prototype={addStyles:function(){var e,i=t("head"),n=t("<style>").get(0),h=[["."+this.hiddenListClass+" ["+this.hiddenItemAttr+"]","display: none"],["."+this.highlightClass,"background: "+this.highlightColor]];i.append(n),e=n.sheet||document.styleSheets[0];for(var s,a,d=0;d<h.length;d++)s=h[d][0],a=h[d][1],e.insertRule?e.insertRule(s+"{"+a+"}",0):e.addRule&&e.addRule(s,a,0)},indexing:function(){var e=this;"text"==this.searchAttr?this._items.each(function(){var i=t(this),n=i.attr("data-unique-search")?i.attr("data-unique-search"):i.attr("id");e.cache.push({node:this,html:this.innerHTML,text:(i.text()||"").toLowerCase(),hidden:!1,id:n})}):"val"==this.searchAttr&&this._items.each(function(){var i=t(this),n=this,h="",s=i.attr("data-unique-search")?i.attr("data-unique-search"):i.attr("id");i.find("input:visible,select,textarea").each(function(){h+=t(this).is("textarea")||t(this).is("select")?""==t(this).text()?t(this).val():t(this).text().replace(/[\s]/g," ")+"\n":t(this).val()+"\n"}),e.cache.push({node:n,html:n.innerHTML,text:(h||"").toLowerCase(),hidden:!1,id:s})})},query:function(e){e=e||this.value,this.hiddenCount=0;for(var i,n=new RegExp(e,"ig"),h=t.proxy(this._paint,this),s=0,a=this.cache.length;a>s;s++)i=this.cache[s],-1===i.text.indexOf(e)?(i.hidden||(i.hidden=!0,i.node.setAttribute(this.hiddenItemAttr,"")),this.hiddenCount+=1):i.hidden&&(i.hidden=!1,i.node.removeAttribute(this.hiddenItemAttr)),this.highlight&&(i.matched&&(i.matched=!1,i.node.innerHTML=i.html),i.hidden||(i.matched=!0,i.node.innerHTML=i.html.replace(n,h))),this.onFound&&!i.hidden&&this.onFound(i.node,e);this._container.addClass(this.hiddenListClass)},showAll:function(){if(this.hiddenCount){for(var t,e=0,i=this.cache.length;i>e;e++)t=this.cache[e],t.hidden=!1,t.node.removeAttribute(this.hiddenItemAttr),t.matched&&(t.matched=!1,t.node.innerHTML=t.html);this._container.removeClass(this.hiddenListClass),this.hiddenCount=0}},_paint:function(t){return'<span class="'+this.highlightClass+'">'+t+"</span>"},_debounce:function(t,e,i){var n=null,h=this;return function(){var s=arguments;clearTimeout(n),n=setTimeout(function(){t.apply(i||h,s)},e)}}}});